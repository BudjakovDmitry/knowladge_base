# CI/CD

CI - continues integration<br>
CD - continues delivery или continues deployment

CI/CD - это концепция, которая реализует как бы автоматизированный конвейер, который облегчает слияние только что написанного и законченного кода с основной кодовой базой. Также он запускает различные тесты и проверки и автоматизированный деплой и развертывание.

Основная цель этих процессов - повысить надежность разработки и стабильность релизов, и уменьшить время, затрачиваемое на эти процессы.

## Шаги процесса CI/CD

### 1. Написание кода

На этом этапе происходит написание кода, покрытие этого кода тестами, коммит и пуш в VCS (например в Гит).

### 2. Сборка (build)

Специальная система автоматически собирает изменения и запускает их тестирование. Такие системы называт "системы непрерывной интеграции". Пример: Jenkins.

### 3. Тестирование

После успешного прохождения автоматических тестов изменения отдаются в ручное тестирование.

### 4. Релиз

После того, как команда тестировщиков проверила все изменения, у нас получилась стабильная версия продукта. Этой версии присваивается номер и теперь она называется релиз-кандидатом.

### 5. Деплой

Наши изменения загружаются и разворачиваются на продакшн сервере.

### 6. Эксплуатация и мониторинг

На этом шаге мы следим за развернутой версией продукта и при необходимости стабилизируем ее и исправляем ошибки.

# 7. Планирование новых изменений

Собирается обратная связь от пользователей и составляется план будущих релизов. После завершения этого этапа цикл повторяется с начала.

## Continues integration (CI)

Весь код, который пишется командой, объеденяется в основной репозиторий. В общих чертах работа выглядит так: каждый разработчик работает в своей локальной ветке. После завершения работы разработчик открывает pull request и отправляет его на code review, после успешного прохождения которого все изменения попадают в основную ветку (как правило, это ветка develop). Каждый раз после тагоко слияния должна происходить автоматическая сборка проекта и запуск автоматических тестов. Таким образом, если что-то вызывает ошибку, мы узнаем об этом сразу же.

Таким образом, в процесс CI входит автоматизирование шагов проверки только что написанного кода. Как следствие, CI позволяет минимизировать количество проблем в рабочей версии проекта.

Для CI есть одно необходимое условие: тестирование билда должно проходить максимально быстро, чтобы вся эта концепция имела смысл. В среднем, сборка и тестирование не должны превышать 10 минут. В противном случае, разработка может затягиваться по времени, что не очень хорошо.

## Continues delivery

Это концепция автоматизации всего процесса релиза программного обеспечения. Сначала автоматически выполняется шаг CI, после этого проект автоматически готовится к релизу на боевой сервер. Иногда на этом этапе подключается DevOps-инженер. Он берет уже протестированный на этапе CI билд и производит его развертывание. Зачастую этот этап полностью автоматизированный. Как правило, руками нужно сделать только одно действие: одобрить развертывание.

## Continues deployment

Это последний этап непрерывного процесса разработки. Он включает в себя все предыдущие шаги. Его суть заключается в том, чтобы развернуть внесенные программистом изменения в продакшн без каких-либо дополнительных отмашек со стороны разработчика. Для того чтобы этот этап работал очень важно чтобы на проекте существовала культура мониторинга. Чтобы в случае поломки боевого продукта, разработчики сразу же узнали об этом и оперативно откатили изменения.
