# Заглушки функций

Фикстура monkeypatch может использваться чтобы создать функции-заглушки для существующих функций, чтобы те возвращали конкретные наперед заданные значения.

Рассмотрим сценарий, в котором мы работаем с пользовательскими директориями. При тестировании мы не хотим, чтобы наши тесты зависили от пользователя, под которым запускается тест.

В этом примере `monkeypatch.setattr` используется для создания функции-заглушки, которая будет подменять собой реальную функцию `Path.home` так, чтобы во время теста она всегда возвращала путь `Path("/abs")`. В результате, под каким бы пользователем ни запустился тест, домашняя директория всегда будет одиннаковая. `monkeypatch.setattr` должна быть вызвана перед тем тем как в тесте будет вызываться функция, которую мы хотим запатчить. После теста все модификации запатченной функции будут отменены.

```python
from pathlib import Path


def getssh():
    return Path.home() / ".ssh"


def test getssh(monkeypatch):
    def mockreturn():
        return Path("/abc")

    monkeypatch.setattr(Path, "home", mockreturn)

    x = get_ssh()
    assert x == Path("/abc/.ssh")
```
