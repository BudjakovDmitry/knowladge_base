# Внешние программы в скриптах

Внутри скрипта можно запускать внешние программы. Зачастую в скрипте нужно проанализировать результат работы этих программ. Для этого существует синтаксис:

```bash
variable=`program`
```

Пример

```bash
# в переменную а запишется "test"
a=`echo "test"`

# в переменную files запишутся имена файлов в домашней директории
files=`ls ~`
```

Даже если программа ничего не выводит на экран, результат ее работы все равно можно проанализировать. Все программы возвращают код возврата:

* 0 - корректное завершение
* не 0 - в процессе работы были ошибки

Узнать код только что выполненной программы: `$?`

Выйти с кодом: `exit code`

Bash позволяет удобно проанализировать код возврата с помощью условия if. В этом случае в if квадратные скобки не требуются.

```bash
if `program oprions arguments`
then
    # actions, if code is 0
else
    # actions, if code is not 0
fi
```

__Важное замечание__: если запуск внешней программы выводит что-то в stdout, то в проверку if поступит именно этот вывод, а не код возврата! В этом случае, чтобы проанализировать код возврата нужно применить немного другой синтаксис:

```bash
# 1) Сначала запустить program, затем if [[ $? -eq 0 ]]
./outer.sh
if [[ $? -eq 0 ]]
then
    # code
fi

2)
if `./outer.sh > some_file.txt`
then
    # code
fi
```
