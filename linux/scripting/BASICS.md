# Основы программирования на bash

Программы на bash как правило имеют расширение `.sh`.

Запустить скрипт можно несколькими способами:

* сделать его исполняемым и запустить: `path/to/script.sh`
* передать скрипт в качестве аргументa интерпретатору bash: `bash path/to/script.sh`

## Операторы

В программы на bash можно встарлять команды терминала, например cd, pwd, ls и т.д. При этом нужно учитывать, что когда мы запускаем скрипт, он запускается и выполняется в собственной оболочке. По завершению скрипт из этой оболочки выходит. Поэтому, если мы, например в скрипте перейдем в другую директорию, то после завершения скрипта мы останемся в старой директории, так как все переходы были выполнены в другой оболочке. Если в скрипте создавать файлы или директории, то они будут созданы во всех одолочках, так как файл создается не в оболочке, а на диске компьютера.

Команда `echo` выводит на экран то, что ей передали в качестве аргумента.

```bash
echo "Hello, world!"
```

## Переменные

Имя переменной может состоять из букв, цифр и знаков подчеркивания. Имя переменной не может начинаться с цифры.

Значение переменной может быть числом, строкой или отдельным символом. Значение строк могут задаваться без кавычек, но если в них есть пробельные символы, то кавычки обязательны.

### Запись переменной
Запись значения переменной: `<name>=<value>`. Ставить пробелы около символа равенства нельзя.

```bash
path=~/Docs
```

### Чтение переменной

Чтение переменной: `$<name>` или `${<name>}`. Разница между этими двумя способами показана ниже в примерах. Предпочттельней использоватьс второй вариант, так как в этом случае мы явно указываем, где имя переменной начинается и где она заканчивается.

Если обратиться к несуществующей переменной, то ошбки не произойдет. Вернется пустая строка

Пример: зададим переменную path2, в которой будет использовано значение переменной path и к нему добавлена строка /file.txt

```bash
path=~/Docs
path2=$path/file.txt  # path2=~/Docs/file1.txt

# Прочиать переменную path2
echo "Path is $path2"  # Path is ~/Docs/file1.txt

# Прочитать переменную path
echo "Path is ${path}2"  # Path is ~/Docs2
```

Одинарные и двойные кавычки не равнозначны. Когда используются двойные ковычки, то все конструкции вида $<name> будут означать, что нужно взять имя переменной и поместить ее в эту строку. Когда используются одинарные кавычки, то все особые значение значка $ теряются и он трактуется просто как символ $. Это свойство относится не только к операции чтения, но и к операции записи. В строке с двойными кавычками можно заэкранировать символ $, тогда он тоже теряет все свои свойства.

```bash
var1="Hello, world!"
var2="var1 is $var1"

echo '$var2'   # $var2
echo "$var2"   # var1 is Hello, world!
echo "\$var2"  # $var2

var2 = 'var1 is $var1'

echo "$var2"   # var1 is $var1
```


## Аргументы

В bash-скрипты можно передавать аргументы. Аргументы передаются при запуске скрипта. Они перечисляются через пробел после имени скрипта. Передавать можно числа и строки.

```bash
./script.sh arg1 arg2 arg3 ...
```

Обработка аргументов внутри скрипта:

```bash
$1  # первый аргумент
$2  # второй аргумент

$0  # имя скрипта
$#  # количество аргументов
$$  # PID
```

Пример

```bash
#!/bin/bash

var1=$1
var2=$2

echo "Script is $0"
echo "Total arguments: $#"
echo "Arguments are $var1 and $var2"
```

Если передать в скрипт меньше аргументов, чем возможно, то никакой ошибки не произйдет. Все переменные типа $2, $3 и т.д. для которых не хватило аргументов будут соержать пустые строки.
