# ssh
ssh (secure shell) - это протокол, по которому происходит общение между нашим терминалом и сервером.

Для подключения к серверу нужно знать:
1. Адрес сервера
2. Логин и пароль

```bash
ssh login@server_address -p port
```
Порт указывать необязательно.

При входе на сервер первый раз, терминал выдаст предупреждение и попросит подтверждения. Если мы подтвердим действие, то сервер будет добавлен в список разрешенных и в следующий раз такого предупреждения не будет.

Далее потребуется ввести пароль.

После подключения к терминалу сервера, с ним можно работать так же как и с локальным терминалом.

Чтобы выйти с сервера, нужно ввести команду `exit`.

## Ключи доступа
Каждый раз вводить пароль при входе на сервер может быть неудобно. С помощью ключей доступа можно входить на сервер, не вводя каждый раз пароль.

Вот его принцип. На клиентском компьютере в папке `~/.ssh` должно лежать два ключа: публичный и закрытый. Ключ - это текстовый файл с некоторой последовательностью символов.
```bash
~/.ssh/id_rsa
~/.ssh/id_rsa.pub
```

На сревере должен лежать файл `~/.ssh/authorized_keys`, в который должно быть внесено содержимое публичного ключа клиента.

При заходе на сервере с клиента отправляется логин и публичный ключ. Сервер проверяет, что в списке авторизованных ключей этот ключ есть и использует его чтобы зашифровать некоторое сообщение, которое отправляется в ответ на клиентский компьютер. Клиентский компьютер использует закрытый ключ, чтобы расшифровать сообщение и посылает его серверу. Сервер сравнивает отправленное и полученное сообщения. Если они совпадают, то сервер предоставляет доступ. Иначе, сервер разрывает соединение и не предоставляет доступ.

Создание ключа:
```bash
ssh-keygen
```
Эта программа предложит ввести имя ключа (если не указать, то будет использовано имя по умолчанию). Далее команда предложит зашифровать ключ паролем.

Сообщить системе, что мы добавили ключи
```bash
ssh-add
```

Чтобы посмотреть публичный ключ можно использовать любой редактор
```bash
cat ~/.ssh/id_rsa.pub
```
Нужно скопировать содержимое публичного ключа и вставить его в файл autorized_keys на сервере.

Чтобы редактировать авторизованные ключи на сервере можно использовать, например, nano
```bash
nano ~/.ssh/autorised_keys
```
Файл может содержать несколько ключей. Каждый в новой строке.
