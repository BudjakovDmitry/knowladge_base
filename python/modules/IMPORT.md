# Импортирование

## Выбор файла модуля

Расширения файлов (например, .py) намеренно не указываются в операциях import. Интерпретатор выбирает первый найденный в пути поиска файл, имя которого соответствует имени, указанному в операторе import. Операция import - это интерфейс ко множеству внешних компонентов - исходному коду, разновидностям байт-кода, скомпилированным расширениям и т.п. Интерпретатор автоматически выбирает любой вариант, дающий совпадение с именем модуля.

Оператор `import b` способен распознать и загрузить:

* файл исходного кода b.py;
* файл байт-кода b.pyc;
* файл оптимизированного байт-кода b.pyo;
* каталог по имени b для операций импортирования пакетов;
* скомпилированный модуль расширения, написанный на C, C++ или другом языке и динамически связываемый при импортировании (например b.so в Linux или b.dll и b.pyd в Windows);
* скомпилированный встроенный модуль, написанный на C и статически связанный с Python;
* компонент в файле ZIP, который автоматически извлекается при импортировании;
* образ в памяти для фиксированных исполняемых файлов;
* класс Java для верссии Jython;
* компонент .NET для версии IronPython.

Для импортера различия в типах загружаемых файлов совершенно несущественны как при импортировании, так и при извлечении атрибутов модулей. Оператор `import b` обеспечивает получение модуля b, чем бы он ни был, в соответствии с путем поиска модулей, а `b.attr` извлекает элемент из модуля, будь он переменной Python или связанной функцией C. Например, некоторые стандартные модули написаны на C, а не на Python, но поскольку они выглядят точно так же как файлы модулей на Python, пользователи могут не беспокоится об этом факте.

Операции импортирования можно переопределять. Например, можно заставить операцию import делать разную полезную работу, такую как загрузка файлов из архивов, выполнение расшифровки и т.п. Сам интерпретатор выполняет такие переопределения, например, чтобы разрешить импортирование прямо из ZIP-архивов: архивированные файлы автоматически извлекаются на стадии импортирования, когда файл .zip выбирается из пути поиска импортируемых модулей.

Такие переопределения возожны в функции `importlib.__import__`. Функция `importlib.__import__` представляет собой настраиваемый инструмент, который в действительности запускают операторы import.

## distrutils

Сторонние расширения для Python обычно для своей автоматической установки используют инструменты `distrutils` из стандартной библиотеки. Такой подход не требует конфигурирования пути.

Системы, которые используют distrutils, как правило, поступают со сценарием setup.py, запускаемым для их установки. Эти системы устанавливаются в каталоге, который уже является частью пути поиска модулей. Обычно это каталог site-packages внутри каталога, в который установлен Python.

## Перезагрузка модуля

Если нам необходимо повторно выполнить загрузку уже импортированного модуля, то потребуется функция `reload`, доступная в стандартном библиотечном модуле [importlib](../stl/IMPORTLIB.md)
