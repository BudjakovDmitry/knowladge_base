# Базы данных

## Модель данных

*Модель данных* харктеризует способ организации данных и основные методы доступа к ним. Сначала были предложены *иерархическая* и *сетвая* модели данных. В дальнейшем появилась *реляционная* модель данных. Характерной чертой баз данных реляционного типа является то, что данные воспринимаются пользователем в виде таблиц. В распоряжении пользователя имеются операторы для выборки данных из таблиц, а также для вставки новых данных, обновления и удаления имеющихся данных.

Одним из достоинств реляционных базы данных является ее способность поддерживать связи между элементами данных. В те времена, когда технологии реляционных баз данных еще не получили широкого распространения, программистам приходиловь вручную на процедурных языках реализовывать такие операции, которые сейчас называются каскадным обновлением внешних ключей или каскадным удалением записей из подчиненных таблиц.

Язык общения с реляционными базами данных является *деклоративным*. Это означает, что для получения результата достаточно указать, *что* нужно получить, но не требуется предписывать способ получения результата, т.е. *как* его получить.

## Система баз данных

Система баз данных - это компьютеризированная система, предназначенная для хранения, переработки и выдачи информации по запросу пользователей. Такая система включает в себя программное и аппаратное обеспечение, сами данные, а также пользователей.

Современные системы баз данных являются, как правило, многопользовательскими. В таких системах одновременный доступ к базе данных могут получить сразу несколько пользователей.

Система управления базами данных по английски называется database management system (DBMS). СУБД является основным программным обеспечение в системе баз данных. Кроме СУБД в систему баз данных могут входить утилиты, средства для разработки приложений, средства проектирования баз данных, генераторы отчетов и пр.

Систему баз данных можно разделить на два главных компонента: сервер и набор клиентов. Сервер - это и есть СУБД. Клиентами являются различные приложения, написанные прикладными программистами, или встроенные приложения, потавляемые вместе с СУБД. Один серевер может обслуживать много клиентов.

Современные СУБД включают в себя словарь данных. Это часть базы данных, которая описывет сами данные, хранящиеся в ней.

## Основные понятия релиционной модели

В реляционных базах данных пользователь воспринимает данные в виде таблиц. Строки в этих таблицах называются **записями**. Столбцы называются **полями**. На пересечении строк и столбцов находятся атомарные значения, которые нельзя разбить на более мелкие значения без потери смысла.

В теории реляционных баз данных таблицы называют **отношениями (relations)** - поэтому базы данных называются реляционными. Отношение - это математический термин. При определении свойств таких отношений используется теория множеств. В терминах данной теории строки будут называться **кортежами (tuples)**, а колонки - атрибутами. Отношение имеет заголовок, который состоит из атрибутов, и тело, состоящее из кортежей. Количество атрибутов называется **степенью отношения**, а количество кортежей - **кардинальным числом**.

Для идентификации строк в таблицах и для связи таблиц между собо используются ключи. **Потенциальный ключ** - это комбинация атрибутов таблицы, позволяющая уникальным образом идентифицировать строки в ней. Ключ может состоять только из одного атрибута таблицы. Например, в таблице "Студенты" студента можно однозначно идентифицировать по номеру зачетной книжки. Или использовать составной ключ: серия документа, удостоверяющего личность и номер докумнета, удостоверяющего личность. Ни одно из этих полей по отдельности не может быть использовано в качестве уникального идентификатора. Важным является то, что составной ключ должен быть *неизбыточным*, т.е. никакое подмножество атрибутов, входящих в него не должно обладать свойством уникальности.

**Студенты**

№ Зачетной книжки | ФИО | Серия документа | Номер документа
--- | --- | --- | ---
55500 | Иванов Иван Петрович | 0402 | 645327
55800 | Климов Андрей Иванович | 0402 | 673211
55865 | Новиков Николай Юрьевич | 0202 | 554390

**Успеваемость**

Зачетная книжка | Предмет | Учебный год | Семестр | Оценка
--- | --- | --- | --- | ---
55500 | Физика | 2016/2017 | 1 | 5
55500 | Математика | 2016/2017 | 1 | 4
55800 | Физика | 2016/2017 | 1 | 4
55800 | Физика | 2016/2017 | 2 | 3

Ключи нужны для адрессации на уровне записей. При наличии в таблице более одного потенциального ключа, один из них выбирается в качестве **первичного ключа**, а остальные будут являться **альтернативными ключами**.

Предположим, что в таблице "Студенты" нет строки с номером зачетной книжки 55900, тогда включать строку с таким номером зачетной книжки в таблицу "Успеваемость" не имеет смысла. Таким образом, значения столбца "Номер зачетной книжки" в таблице "Успеваемость" должны быть согласованы со значениями такого же столбца в таблице "Студенты". Атрибут "Номер зачетной книжки" в таблице "Успеваемость" называется **внешним ключом**. Таблица, содержащая внешний ключ, называется **ссылающейся** таблицей (referencing table). Таблица, содержащая соответствующий потенциальный ключ, называется **ссылочной (целевой)** таблицей (referenced table). В таких случаях говорят, что внешний ключ ссылается на потенциальный ключ в ссылочной таблице. Внешний ключ может быть составным. Внешний ключ не обязан быть уникальным. Проблема обеспечения того, чтобы база данных не содержала неверных значений внешних ключей, известна как проблема **ссылочной целостности**. Ограничение, согласно которому значения внешних ключей должны соответствовать значениям потенциальных ключей, называется **ограничением ссылочной целостности (ссылочным ограничением)**

Обеспечением выполнения ограничений ссылочной целостности занимается СУБД, а от разработчика требуется лишь указать атрибуты, служащие в качестве внешних ключей.

При проектировании баз данных часто предусматривается, что при удалении строк из ссылочной таблицы соответствующие строки из ссылающейся таблицы должны быть также удалены, а при изменении значений столбца, на который ссылается внешний ключ, должны быть изменены значения внешнего ключа в ссылающейся таблице. Это называется **каскадным удалением (обновлением)**. Иногда вместо удаления строк из ссылающейся таблицы, в этх строках заменяют значения атрибутов NULL-значениями.

NULL - это специальные значения, означающие "ничто" или отсутствие значения. NULL не одно и тоже что "нуль" или "пустая строка". Первичные ключи не могут содержать NULL-значений.

Транзакция - это набор опраций над базой данных, рассматриваемых как единая единая и неделимая единицаработы, выполняемая полностью или не выплняемая вовсе, если произошел какой-то сбой в процессе выполнения транзакции. Транзакции являются средством обеспечения согласованности данных. В базе данных из примера транзакцией могут быть, например, две операции: удаление строки из таблицы "Студенты" и удаление связанных по внешнему ключу строк из таблицы "Успеваемость".

## SQL

Язык SQL - это непроцедурный язык, который является стандартным средством работы с данными во всех реляционных СУБД. Команды, написанные на этом языке, указывают СУБД, какой результат должен быть получен, но не описывают процедуру получения этого результата. СУБД сама определяет способ выполнения команды пользователя. В SQL выделяется группа операторов определения данных (Data Definition Language - DDL), группа операторов манипулирования данными (Data Manipulation Language - DML) и группа операторов, управляющих привелегиями доступа к объектам баз данных (Data Control Language - DCL).

К операторам языка определения данных (DDL) относятся команды для создания, изменения и удаления таблиц, представлений и других объектов базы данных.

К операторам языка манипулирования данными (DML) относятся команды для выборки строк из таблиц, вставки строк в таблицы, обновления и удаления строк.
