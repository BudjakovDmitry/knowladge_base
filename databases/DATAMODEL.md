# Модели данных

## Основные понятия релиционной модели

Для идентификации строк в таблицах и для связи таблиц между собо используются ключи. __Потенциальный ключ__ - это комбинация атрибутов таблицы, позволяющая уникальным образом идентифицировать строки в ней. Ключ может состоять только из одного атрибута таблицы. Например, в таблице "Студенты" студента можно однозначно идентифицировать по номеру зачетной книжки. Или использовать составной ключ: серия документа, удостоверяющего личность и номер докумнета, удостоверяющего личность. Ни одно из этих полей по отдельности не может быть использовано в качестве уникального идентификатора. Важным является то, что составной ключ должен быть _неизбыточным_, т.е. никакое подмножество атрибутов, входящих в него не должно обладать свойством уникальности.

Ключи нужны для адрессации на уровне записей. При наличии в таблице более одного потенциального ключа, один из них выбирается в качестве __первичного ключа__, а остальные будут являться __альтернативными ключами__. Первичный ключ не может содержать NULL значений.

Рассмотрим две таблицы: студенты и успеваемость

**Студенты**

№ Зачетной книжки | ФИО | Серия документа | Номер документа
--- | --- | --- | ---
55500 | Иванов Иван Петрович | 0402 | 645327
55800 | Климов Андрей Иванович | 0402 | 673211
55865 | Новиков Николай Юрьевич | 0202 | 554390

**Успеваемость**

Зачетная книжка | Предмет | Учебный год | Семестр | Оценка
--- | --- | --- | --- | ---
55500 | Физика | 2016/2017 | 1 | 5
55500 | Математика | 2016/2017 | 1 | 4
55800 | Физика | 2016/2017 | 1 | 4
55800 | Физика | 2016/2017 | 2 | 3

В таблице "Студенты" нет строки с номером зачетной книжки 55900, тогда включать строку с таким номером зачетной книжки в таблицу "Успеваемость" не имеет смысла. Таким образом, значения столбца "Номер зачетной книжки" в таблице "Успеваемость" должны быть согласованы со значениями такого же столбца в таблице "Студенты". Атрибут "Номер зачетной книжки" в таблице "Успеваемость" называется __внешним ключом__. Таблица, содержащая внешний ключ, называется __ссылающейся__ таблицей (referencing table). Таблица, содержащая соответствующий потенциальный ключ, называется __ссылочной (целевой)__ таблицей (referenced table). В таких случаях говорят, что внешний ключ ссылается на потенциальный ключ в ссылочной таблице. Внешний ключ может быть составным. Внешний ключ не обязан быть уникальным. Проблема обеспечения того, чтобы база данных не содержала неверных значений внешних ключей, известна как __проблема ссылочной целостности__. Ограничение, согласно которому значения внешних ключей должны соответствовать значениям потенциальных ключей, называется __ограничением ссылочной целостности (ссылочным ограничением)__.

Обеспечением выполнения ограничений ссылочной целостности занимается СУБД, а от разработчика требуется лишь указать атрибуты, служащие в качестве внешних ключей.

При проектировании баз данных часто предусматривается, что при удалении строк из ссылочной таблицы соответствующие строки из ссылающейся таблицы должны быть также удалены, а при изменении значений столбца, на который ссылается внешний ключ, должны быть изменены значения внешнего ключа в ссылающейся таблице. Это называется __каскадным удалением (обновлением)__. Иногда вместо удаления строк из ссылающейся таблицы, в этх строках заменяют значения атрибутов NULL-значениями.
