# Понятия и терминология

## Типы СУБД

* Файл-серверные: Microsoft Access

   В таких СУБД файлы данных располагаются централизованно на файл-сервере, а СУБД располагаются на каждом клиентском компьютере. Преимуществом такой архитектуры является низкая нагрузка на процессор файл-сервера. А недостатками являются высокая загрузка локальной сети и зачастую невозможность обеспечения высокой надежности, достпности и безопасности. Такие СУБД не способны справлятся с высокой пиковой нагрузкой современных приложений. На сегодняшний день такая технология считается устаревшей.

* Клиент-серверные: MySQL, PostgreSQL,...

    СУБД и сама база данных располагаются на сервере, а к СУБД с клиентских машин осуществляется доступ. Все клиентские запросы обрабатываются СУБД централизованно. В каком-то смысле слабым звенном здесь становиться сервер, на который сваливается вся нагрузка. Однако сервера позволяют хорошо масштабироваться. Сегодня такие СУБД являются самми популярными.

* Встраиваемые: SQLite

   Используютя там, где нет необходимости устанавливать полноценную тежеловесную клиент-серверную СУБД (например, в смартфонах). Такая СУБД выстпает как составная часть программного обеспечения: устанавливается вместе с программой и используется для работы с данными приложения.

## Модели данных

__Модель данных__ харктеризует способ организации данных и основные методы доступа к ним. 

Первыми были предложены __иерархическая__ и __сетвая__ модели данных. В таких базах данные организованы в виде иерархии или сети. Примерами могут служить каталоги LDAP или каталоги Active Directory. Например, в этих каталогих содержится информация об организации, внутри нее вложена информация о подразделениях этой организации и в каждом подразделении содержится информация о пользователях.

В дальнейшем появилась __реляционная__ модель данных. Характерной чертой баз данных реляционного типа является то, что данные воспринимаются пользователем в виде таблиц. В распоряжении пользователя имеются операторы для выборки данных из таблиц, а также для вставки новых данных, обновления и удаления имеющихся данных.

В 2010-х годах нереляционные СУБД снова стали набирать популярность. Это базы для хранения больших объемов данных и NoSQL. В таких БД данные могут хранится в неструктурированном виде (там нет иерархии или таблиц). Данным могут хранится не на одном сервере, а на большом количестве связанных между собой серверов. К ним относятся БД, где данные хранятся в формате ключ-значение, столбцовые БД, документоориентированные СУБД, которые служат для хранения иерархических структур данных.

## Основные понятия релиционной модели

Теоретической основой релеционных СУБД служит реляционная алгебра. Реляционная алгебра определяет систему операций над отношениями: объединение, пересечение, вычитание, соединение, и т.д.

Термину _отношение_ в релиционной алгебре на практике в реальных СУБД соответствует понятие _таблица_, и в реляционных базах данных пользователь воспринимает данные в виде таблиц. Строки в этих таблицах называются __записями__. В реляционной алгебре записям соответствует термин __кортеж__. Столбцы называются __полями (атрибутами)__. На пересечении строк и столбцов находятся атомарные значения, которые нельзя разбить на более мелкие значения без потери смысла.

Все вышеперечисленные операции реляционной алгебры (объединение, пересечение и т.д.) в реляционных СУБД выражаются через язык __SQL__.

__Сущность__ - это модель из реальной предметной области, например, клиент, заказ, поставщик. Каждая запись в таблице отражает экземпляр сущности. Столбцы отражают атрибуты сущности.

__Результирующий набор__ - это по сути результат выполнения SQL-запроса (SELECT). Результирующий набор всегда представлен в виде таблицы.

Для идентификации строк в таблицах и для связи таблиц между собо используются ключи. **Потенциальный ключ** - это комбинация атрибутов таблицы, позволяющая уникальным образом идентифицировать строки в ней. Ключ может состоять только из одного атрибута таблицы. Например, в таблице "Студенты" студента можно однозначно идентифицировать по номеру зачетной книжки. Или использовать составной ключ: серия документа, удостоверяющего личность и номер докумнета, удостоверяющего личность. Ни одно из этих полей по отдельности не может быть использовано в качестве уникального идентификатора. Важным является то, что составной ключ должен быть *неизбыточным*, т.е. никакое подмножество атрибутов, входящих в него не должно обладать свойством уникальности.

**Студенты**

№ Зачетной книжки | ФИО | Серия документа | Номер документа
--- | --- | --- | ---
55500 | Иванов Иван Петрович | 0402 | 645327
55800 | Климов Андрей Иванович | 0402 | 673211
55865 | Новиков Николай Юрьевич | 0202 | 554390

**Успеваемость**

Зачетная книжка | Предмет | Учебный год | Семестр | Оценка
--- | --- | --- | --- | ---
55500 | Физика | 2016/2017 | 1 | 5
55500 | Математика | 2016/2017 | 1 | 4
55800 | Физика | 2016/2017 | 1 | 4
55800 | Физика | 2016/2017 | 2 | 3

Ключи нужны для адрессации на уровне записей. При наличии в таблице более одного потенциального ключа, один из них выбирается в качестве **первичного ключа**, а остальные будут являться **альтернативными ключами**.

Предположим, что в таблице "Студенты" нет строки с номером зачетной книжки 55900, тогда включать строку с таким номером зачетной книжки в таблицу "Успеваемость" не имеет смысла. Таким образом, значения столбца "Номер зачетной книжки" в таблице "Успеваемость" должны быть согласованы со значениями такого же столбца в таблице "Студенты". Атрибут "Номер зачетной книжки" в таблице "Успеваемость" называется **внешним ключом**. Таблица, содержащая внешний ключ, называется **ссылающейся** таблицей (referencing table). Таблица, содержащая соответствующий потенциальный ключ, называется **ссылочной (целевой)** таблицей (referenced table). В таких случаях говорят, что внешний ключ ссылается на потенциальный ключ в ссылочной таблице. Внешний ключ может быть составным. Внешний ключ не обязан быть уникальным. Проблема обеспечения того, чтобы база данных не содержала неверных значений внешних ключей, известна как проблема **ссылочной целостности**. Ограничение, согласно которому значения внешних ключей должны соответствовать значениям потенциальных ключей, называется **ограничением ссылочной целостности (ссылочным ограничением)**

Обеспечением выполнения ограничений ссылочной целостности занимается СУБД, а от разработчика требуется лишь указать атрибуты, служащие в качестве внешних ключей.

При проектировании баз данных часто предусматривается, что при удалении строк из ссылочной таблицы соответствующие строки из ссылающейся таблицы должны быть также удалены, а при изменении значений столбца, на который ссылается внешний ключ, должны быть изменены значения внешнего ключа в ссылающейся таблице. Это называется **каскадным удалением (обновлением)**. Иногда вместо удаления строк из ссылающейся таблицы, в этх строках заменяют значения атрибутов NULL-значениями.

NULL - это специальные значения, означающие "ничто" или отсутствие значения. NULL не одно и тоже что "нуль" или "пустая строка". Первичные ключи не могут содержать NULL-значений.

Транзакция - это набор опраций над базой данных, рассматриваемых как единая единая и неделимая единицаработы, выполняемая полностью или не выплняемая вовсе, если произошел какой-то сбой в процессе выполнения транзакции. Транзакции являются средством обеспечения согласованности данных. В базе данных из примера транзакцией могут быть, например, две операции: удаление строки из таблицы "Студенты" и удаление связанных по внешнему ключу строк из таблицы "Успеваемость".

## SQL

Язык SQL - это непроцедурный язык, который является стандартным средством работы с данными во всех реляционных СУБД. Команды, написанные на этом языке, указывают СУБД, какой результат должен быть получен, но не описывают процедуру получения этого результата. СУБД сама определяет способ выполнения команды пользователя.

Язык общения с реляционными базами данных является **деклоративным**. Это означает, что для получения результата достаточно указать, *что* нужно получить, но не требуется предписывать способ получения результата, т.е. *как* его получить.

В SQL выделяется четыре группы операторов:

* определения данных (Data Definition Language - DDL). К этим операторам относятся команды создания, изменения и удаления таблиц, представлений и других объектов базы данных: __CREATE__, __ALTER__, __DROP__.
* группа операторов манипулирования данными (Data Manipulation Language - DML). __SELECT__, __INSERT__, __UPDATE__, __DELETE__. Служат для выборки, вставки, обновления и удаления данных.
* группа операторов для управления транзакциями (Transaction Control Language - TCL). __COMMIT__, __ROLLBACK__, __SAVEPOINT__.
* группа операторов, управляющих привелегиями доступа к объектам баз данных (Data Control Language - DCL). __GRANT__, __REVOKE__, __DENY__.

В мире существует несколько наиболее популярных СУБД: PostgreSQL, MySQL, Microsoft SQL Server, и т.д. Диалекты языка SQL, которые поддерживаются каждой из этих СУБД немного различаются. Однако во всех этих диалектах есть подчасть, которая одинакова у всех. Эта подчасть регламентируется стандартом ANSI SQL-92.

Большинство различий в диалектах касаются процедурных расширений. Вот названия диалектов для наиболее популярных СУБД:

* PL/pgSQL в PostgreSQL
* PL/SQL в Oracle
* T-SQL в MS SQL

