# psql

Утилита psql входит в стандартную поставку СУБД PostgreSQL. Она предназначена для доступа к серверу баз данных.

Для запуска psql нужно ввести команду:

```bash
psql
```

Получение справки
```bash
psql --help
```

## Подключение к БД

Подключение к БД

```bash
psql dbname
```

Если имя базы не указать, она будет выбрана по имени пользователя.

Приглашение к вводу команды выглядит так:

```bash
dbname=>
```

или

```bash
dbname=#
```

Во второй случае показывается, что мы являемся суперпользователем.

Подключение к базе данных `db_name` используя учетную запись пользователя `username`.
```bash
psql -d db_name -U username
```

Выполнить скрипт из файла
```bash
psql -f script.sql -U username
```

Создание базы данных
```bash
createdb -U username db_name
```

При вводе SQL команд можно использовать клавишу Tab для автодополнения вводимого клчевого слова или имени таблицы БД.

Для того, чтобы прекратить ввод команды нужно надать Ctrl+C.

## Сервисные команды

В утилите psql есть множество внутренних команд, которые начинаются с обратной косой черты "\". За некоторыми командами, например \d могут скрываться сложные SQL-запросы к системным таблицам БД. Утилита psql избавляет пользователя от необходимости вводить их.

* `\?` - получение краткой справки по всем сервисным командам
* `\h` - получить список всех SQL-команд
* `\i` - считывает и выполняет команды из заданного файла

   `\i script.sql`

* `\q` - выйти из psql

Получение справки по команде
```
\h CREATE TABLE
```

Посмотреть список всех таблиц и представлений, созданных в БД, к которой сейчас подключены:

```
\dt
```

Посмотреть структуру таблицы

```
\d table_name
```

Посмотреть структуру таблицы с подробным описанием

```
\d+ table_name
```

Посмотреть список схем

```
\dn
```

Посмотреть список индексов

```
\di
или
\di+
```

Включить и выключить секундомер. При включенном секундомере, psql будет сообщать время, затраченное на выполнение всех команд.

```
\timing on
\timing off
```

Подключиться к базе данных

```
\connect db_name
\c db_name
```
