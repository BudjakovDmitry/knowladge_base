# Константы

Есть три типа констант *подразумеваемых* типов: строки, битовые строки и числа. Константы можно также записывать, указывая тип явно.

## Строковые константы

Константы символьных типов в SQL-командах заключаются в одинарные кавычки.

```sql
SELECT 'PostgreSQL';
```

Если в константе соодержится символ одинарной кавычки или обратной косой черты, их необходимо удваивать.

```sql
SELECT 'PGDAY''17';
```

Две строковые константы, разделенные пробельными символами и *минимум одним переводом строки* конкатенируются

```sql
SELECT 'foo'
'bar';
-- 'foobar'
```

```sql
SELECT 'foo'       'bar';
-- синтаксическая ошибка
```

Удвоенный символ "$" играет ту же роль, что и одинарные кавычки, когда в них заключена строковая константа. При использовании символов "$" в качестве ограничителей, уже не нужно удваивать никакие символы, содержащиеся в константе: ни одинарные кавычки, ни символы обратной черты.

```sql
SELECT $$PGDAY'17$$;
```

Возможность использования символа "$" в роли ограничителя символьной константы не является частью стандарта SQL. Это расширение, предлагаемое PostgreSQL.

### Строковые константы в стиле C

PostgreSQL предлагает еще одно расширение стандарта SQL - строковые константы в стиле языка C. Чтобы их использовать нужно перед константой ставить символ "E" (заглавный или строчный). Конгда такая константа разбивается на несколько строк, букву E нужно ставить только перед первым открывающим апострофом. Внутри таких строк символ `\` начитает C-подобные *спецпоследовательности*, внутри которых сочетание обратной косой черты со следующим символом (символами) дает определенное байтовое значение.

Спецпоследовательность | Интерпретация
--- | ---
`\n` | новая строка
`\t` | табуляция

Пример включения в константу символа новой строки.

```sql
SELECT E'PGDAY\n17';
```

При использовании C-стиля необходимо удваивать обратную косую черту, если требуется поместить ее в константу буквально. А для помещения в константу одинарной кавычки нужно либо удвоить ее, либо заэкранировать обратным слешом.

```sql
SELECT E'PGDAY\'17';
```

## Преобразование типов констант

Существует несколько способов преобразование типов:

* `type 'string'`
* `'string'::type`
* `CAST ('string' AS type)`

При преобразровании типов текст строковой константы передается процедуре преобразования типа. Результатом становится константа указанного типа.

Явное приведение типа можно опстить, если нужный тип константы определяется однозначно (например, когда она присваивается непосредственно столбцу таблицы). В этом случае приведени происходит автоматически.

Строковую константу можно записать, используя как обычный синтаксис SQL, так и пормат с долларами.

Приведение типов можно производить, используя синтаксис функций. Но это работает не для всех имен типов.

```
typename('string')
```

Конструкцию `type 'string'` можно использовать только для указания типа простой текстовой константы. Остальные конструкции можно использовать для преобразования типов выражений во время выполнения.

Выражение `type 'string'` не работает для массивов. Для таких констант нужно использовать `::` или `CAST()`.

Синтаксис `CAST()` соотвтствует SQL. Запись type 'string' в стандарте SQL поддерживают только некоторые типы данных, но PostgreSQL позволяет использовать его для всех. Синтаксис с `::` и запись в виде функции имеет исторические корни в PostgreSQL.
