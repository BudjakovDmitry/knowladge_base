# Выборка данных

## where

### ANY, ALL

Операторы (квантификаторы) ANY и ALL используются с предложением WHERE и HAVING. Внутри ANY и ALL пишутся подзапросы.

#### any

ANY возвращает true, если любое из всех значений, найденных подзапросом, удовлетворяет условию для текущей строки внешнего запроса.

Выбрать всех сотружников из филиалов в Москве. Подзапрос вернет идентификаторы филиалов в Москве. Внешний запрос будет проходить по строкам таблицы employees и возвращать те строки, где id филиала равняется любому из идентификаторов, которые вернул подзапрос.

```sql
SELECT *
FROM employees
WHERE department_id = ANY(SELECT department_id
                          FROM departments
                          WHERE city = 'Moscow');
```

#### all

ALL возвращает true, если все значения, найденные подзапросом, удовлетворяют условию для текущей строки внешнего запроса.

Функция ALL обычно применяется для получения выборки, характеризуемой значениями учитываемого столбца, которые больше (или меньше) всех значений того же столбца другой выборки, которая извлекается подзапросом.

Пример: получить список сотрудников, чья зарплата больше зарплаты любого сотрудника из московского филиала. Подзапрос выведет таблицу с единственным столбцом: зарплаты сотрудников в московских филиалах. Внешний запрос проверяет записи сотрудников и вернет тех, чьи зарплаты больше, чем значения из подзапроса.

```sql
SELECT *
FROM customers
WHERE salary > ALL(SELECT salary
                   FROM customers c JOIN department d USING(department_id)
                   WHERE d.city = 'Moscow');
```
