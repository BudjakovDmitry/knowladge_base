# Удаление таблиц

## drop table

Для удаления таблиц применяется команда `DROP TABLE`

```sql
DROP TABLE table_name;
```

Попытка удаления несуществующей таблицы считается ошибкой. Тем не менее в SQL-скриптах часто применяют удаление таблиц перед созданием, игнорируя сообщения об ошибках. Чтобы избежать таких ошибок можно использовать команду

```sql
DROP TABLE IF EXISTS table_name
```

но это не соответствует стадарту SQL.

## truncate table

Команда `TRUNCATE TABLE` удаляет все данные внутри таблицы.

```sql
TRUNCATE TABLE table_name;
```

Когда для удаления строк используется командой DELETE, СУБД пишет логи обо всех удаленных строках. Если же используется команда TRUNCATE, то логи не пишутся.

Данная команда не может удалять строки, на которые ссылаются внешние ключи из других таблиц.

### restart identity, continue identity

В таблицах часто встречаются счетчики, например, поля с типом serial, которые автоинкрементируются при каждой вставке записи. По умолчанию, команда truncate table не сбрасывает счетчики: при вставке данных в пустую таблицу счетчик пойдет не с 1, а с того значения, на котором он был до команды truncate. Так проиисходит, потому что по-умолчанию используется команда `CONTINUE IDENTITY`

```sql
TRUNCATE TABLE table_name;
-- не указываем что делать со счетчиками, поэтому по умолчанию
-- подставляется CONTINUE IDENTITY
TRUNCATE TABLE table_name CONTINUE IDENTITY;
```

Сбросить счетчики можно, указав RESTART IDENTITY явно:

```sql
TRUNCATE TABLE table_name RESTART IDENTITY;
```

После выполнения этой команды все счетчики обнулятся.
